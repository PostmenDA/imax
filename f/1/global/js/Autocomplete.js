Autocomplete=function(b){if(!(b&&b.elementID&&b.source&&b.select&&b.minLength&&b.ROOT&&b.langData&&b.jquery))return console.error("EasyWay Widget Error AutoComplete: MISSING_PARAMETER"),!1;var a=b.jquery,l=null,m=b.marginLeft||0;with(b){var c=a("<div class='eway-autocomplete-menu'><ul></ul></div>"),g=a(elementID).offset();b=g.top+a(elementID).height()+3;var g=g.left,h="";a(c).css("top",b);a(c).css("left",g+m);a(c).css("width",a(elementID).width()-2);a(c).hide();a("body").append(c);var n=function(d){if(0!=
a("li",c).length){var b=0==a("li.selected",c).length?!1:!0;a(c).show();b?(d=d?a("li.selected",c).removeClass("selected").prev("li",c):a("li.selected",c).removeClass("selected").next("li",c),0!=d.length?(a(d).addClass("selected"),a(elementID).val(a(".eway-autocomplete-item-name",d).html())):a(elementID).val(h)):(d=d?a("li:last",c):a("li:first",c),a(d).addClass("selected"),a(elementID).val(a(".eway-autocomplete-item-name",d).html()))}};a(elementID).die("keyup");a(elementID).live("keyup",function(d){switch(d.keyCode){case 37:case 39:break;
case 27:a(c).hide();a(elementID).blur();break;case 38:n(!0);break;case 40:n(!1);break;case 13:a("li.selected",c).click();break;default:h=a(elementID).val(),h.length>=minLength?(clearTimeout(l),l=setTimeout(function(){source({term:h},function(d){if(0!=d.length){var b=a(elementID).offset(),f=b.top+a(elementID).height()+3,b=b.left;a(c).css("top",f);a(c).css("left",b+m);a(c).show();a("li",c).remove();a.each(d,function(d,b){if(10<=d)return!1;var f=b.info?b.info:"",e="<li class='eway-autocomplete-item-"+
b.type+"'>",e=e+("<div class='eway-autocomplete-item-name'>"+b.name+"</div>"),e=e+("<div class='eway-autocomplete-item-type'>"+langData[b.type]+f+"</div>"),k=a(e+"</li>");b.image&&a(k).css("background-image","url("+ROOT+"/images/"+b.image+")");a("ul",c).append(k);a(k).bind("click",function(){a(c).hide();a(elementID).val(b.name);select(null,{item:b})});a(k).bind("mouseenter",function(){a(k).addClass("selected").siblings("li").removeClass("selected");a(elementID).val(a(".eway-autocomplete-item-name",
k).html())})})}else a(c).hide()})},500)):(clearTimeout(l),a(c).hide())}});var p=function(b,c,g){var f=a(b).offset(),h=a(b).width();b=a(b).height();return c>=f.left&&c<=f.left+h&&g>=f.top&&g<=f.top+b?!0:!1};a(document.body).bind("click",function(b){var e=b.pageX;b=b.pageY;p(elementID,e,b)||p(c,e,b)||a(c).hide()})}};
